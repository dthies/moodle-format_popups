define("format_popups/plenum",["exports","core/config","core/fragment","core/notification","core/templates"],(function(_exports,_config,_fragment,_notification,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Module to add navigation to choice modal
   *
   * @module     format_popups/choice
   * @copyright  2021 Daniel Thies <dethies@gmail.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */var contextid,modname;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_config=_interopRequireDefault(_config),_fragment=_interopRequireDefault(_fragment),_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates);_exports.init=(id,name)=>{contextid=id,modname=name,document.querySelectorAll("form#selectgroup select").forEach((function(select){let html,id=select.getAttribute("id"),form=select.closest("form");if(id){let label=document.querySelector('label[for="'+id+'"]');select.setAttribute(id,id+"_popup"),label&&label.setAttribute("for",id+"_popup")}html=form.innerHTML,_templates.default.replaceNodeContents("form#selectgroup",html,"")})),document.querySelector("#format_popups_activity_content").removeEventListener("change",changeGroup,{capture:!0}),document.querySelector("#format_popups_activity_content").addEventListener("change",changeGroup,{capture:!0})};const changeGroup=async e=>{let form=e.target.closest("form");if(form&&e.target.closest("select.custom-select")){let formdata=new FormData(form),params=new URLSearchParams(formdata);if(e.stopPropagation(),e.preventDefault(),_config.default.wwwroot+"/mod/plenum/view.php"!==form.getAttribute("action"))return;try{_templates.default.replaceNodeContents("#format_popups_activity_content",_fragment.default.loadFragment("format_popups","mod",contextid,{jsondata:JSON.stringify(params.toString()),modname:modname}))}catch(e){_notification.default.exeception(e)}}}}));

//# sourceMappingURL=plenum.min.js.map