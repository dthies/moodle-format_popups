define("format_popups/form",["exports","core/config","core/fragment","core/notification","core/templates"],(function(_exports,_config,_fragment,_notification,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Module to add handlers for forms to modal content
   *
   * @module     format_popups/form
   * @copyright  2021 Daniel Thies <dethies@gmail.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */var contextid,modname;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_config=_interopRequireDefault(_config),_fragment=_interopRequireDefault(_fragment),_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates);_exports.init=(id,name)=>{contextid=id,modname=name,document.querySelector("#format_popups_activity_content").removeEventListener("submit",handleSubmit),document.querySelector("#format_popups_activity_content").removeEventListener("submit",handleSubmit,{capture:!0}),document.querySelector("#format_popups_activity_content").addEventListener("submit",handleSubmit,{capture:!0})};const handleSubmit=e=>{let form=e.target.closest("form");if(form){let formdata=new FormData(form),data=new URLSearchParams(formdata).toString();if(_config.default.wwwroot+"/mod/"+modname+"/view.php"!==form.getAttribute("action")&&_config.default.wwwroot+"/mod/scorm/player.php"!==form.getAttribute("action"))return;e.preventDefault(),e.stopPropagation(),_fragment.default.loadFragment("format_popups","mod",contextid,{jsondata:JSON.stringify(data),modname:modname}).then(_templates.default.replaceNodeContents.bind(_templates.default,"#format_popups_activity_content")).fail(_notification.default.exception)}}}));

//# sourceMappingURL=form.min.js.map