define("format_popups/h5pactivity",["exports","core/config","core/fragment","core/notification","core/templates"],(function(_exports,_config,_fragment,_notification,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Module to show h5pactivity report in modal
   *
   * @module     format_popups/h5pactivity
   * @copyright  2021 Daniel Thies <dethies@gmail.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */var contextid,modname,instance;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_config=_interopRequireDefault(_config),_fragment=_interopRequireDefault(_fragment),_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates);_exports.init=(id,name,instanceid)=>{contextid=id,modname=name,instance=instanceid,document.querySelector("#format_popups_activity_content").removeEventListener("click",showReport),document.querySelector("#format_popups_activity_content").addEventListener("click",showReport)};const showReport=e=>{let anchor=e.target.closest("a");if(anchor){let url=new URL(anchor.getAttribute("href")),params=url.searchParams;url.origin+url.pathname===_config.default.wwwroot+"/mod/h5pactivity/report.php"&&params.get("a")===instance&&(e.preventDefault(),e.stopPropagation(),_fragment.default.loadFragment("format_popups","mod",contextid,{jsondata:JSON.stringify(params.toString()),modname:modname}).then(_templates.default.replaceNodeContents.bind(_templates.default,"#format_popups_activity_content")).fail(_notification.default.exception))}}}));

//# sourceMappingURL=h5pactivity.min.js.map