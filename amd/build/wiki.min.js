define("format_popups/wiki",["exports","core/fragment","core/notification","core/templates"],(function(_exports,_fragment,_notification,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Module to add navigation to wiki modal
   *
   * @module     format_popups/wiki
   * @copyright  2021 Daniel Thies <dethies@gmail.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */var contextid;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.loadPage=_exports.init=void 0,_fragment=_interopRequireDefault(_fragment),_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates);_exports.init=id=>{const content=document.querySelector("#format_popups_activity_content");contextid=id,content.removeEventListener("click",loadPage),content.addEventListener("click",loadPage)};const loadPage=e=>{const anchor=e.target.closest("a");if(anchor&&anchor.href){const url=new URL(anchor.href),pageid=url.searchParams.get("pageid"),params=new URLSearchParams({pageid:pageid});if(!pageid||"/mod/wiki/view.php"!=url.pathname.substr(-18))return;e.preventDefault(),e.stopPropagation(),_fragment.default.loadFragment("format_popups","mod",contextid,{jsondata:JSON.stringify(params.toString()),modname:"wiki"}).then(_templates.default.replaceNodeContents.bind(_templates.default,"#format_popups_activity_content")).fail(_notification.default.exception)}};_exports.loadPage=loadPage}));

//# sourceMappingURL=wiki.min.js.map