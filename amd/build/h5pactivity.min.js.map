{"version":3,"sources":["../src/h5pactivity.js"],"names":["contextid","modname","instance","init","id","name","instanceid","document","querySelector","removeEventListener","showReport","addEventListener","e","anchor","target","closest","url","URL","getAttribute","params","searchParams","origin","pathname","config","wwwroot","get","preventDefault","stopPropagation","Fragment","loadFragment","jsondata","JSON","stringify","toString","then","html","js","templates","replaceNodeContents","fail","notification","exception"],"mappings":"mNAAA,OACA,OACA,OACA,O,sDAEIA,CAAAA,C,CAAWC,C,CAASC,C,QAOJ,QAAPC,CAAAA,IAAO,CAACC,CAAD,CAAKC,CAAL,CAAWC,CAAX,CAA0B,CAE1CN,CAAS,CAAGI,CAAZ,CACAH,CAAO,CAAGI,CAAV,CACAH,CAAQ,CAAGI,CAAX,CAEAC,QAAQ,CAACC,aAAT,CAAuB,iCAAvB,EAA0DC,mBAA1D,CAA8E,OAA9E,CAAuFC,CAAvF,EACAH,QAAQ,CAACC,aAAT,CAAuB,iCAAvB,EAA0DG,gBAA1D,CAA2E,OAA3E,CAAoFD,CAApF,CACH,C,CAOD,GAAMA,CAAAA,CAAU,CAAG,SAACE,CAAD,CAAO,CACtB,GAAIC,CAAAA,CAAM,CAAGD,CAAC,CAACE,MAAF,CAASC,OAAT,CAAiB,GAAjB,CAAb,CACA,GAAIF,CAAJ,CAAY,CACR,GAAIG,CAAAA,CAAG,CAAG,GAAIC,CAAAA,GAAJ,CAAQJ,CAAM,CAACK,YAAP,CAAoB,MAApB,CAAR,CAAV,CACIC,CAAM,CAAGH,CAAG,CAACI,YADjB,CAGA,GAAIJ,CAAG,CAACK,MAAJ,CAAaL,CAAG,CAACM,QAAjB,GAA8BC,UAAOC,OAAP,CAAiB,6BAA/C,EAAgFL,CAAM,CAACM,GAAP,CAAW,GAAX,IAAoBvB,CAAxG,CAAkH,CAC9GU,CAAC,CAACc,cAAF,GACAd,CAAC,CAACe,eAAF,GACAC,UAASC,YAAT,CACI,eADJ,CAEI,KAFJ,CAGI7B,CAHJ,CAII,CACI8B,QAAQ,CAAEC,IAAI,CAACC,SAAL,CAAeb,CAAM,CAACc,QAAP,EAAf,CADd,CAEIhC,OAAO,CAAEA,CAFb,CAJJ,EAQEiC,IARF,CAQO,SAASC,CAAT,CAAeC,CAAf,CAAmB,CACtBC,UAAUC,mBAAV,CAA8B,iCAA9B,CAAiEH,CAAjE,CAAuEC,CAAvE,CACH,CAVD,EAUGG,IAVH,CAUQC,UAAaC,SAVrB,CAWH,CACJ,CACJ,C","sourcesContent":["import config from 'core/config';\nimport Fragment from 'core/fragment';\nimport notification from 'core/notification';\nimport templates from 'core/templates';\n\nvar contextid, modname, instance;\n/**\n * Initialize Choice mod actions\n *\n * @param int contextid Course module context id\n * @param string modname Activity type\n */\nexport const init = (id, name, instanceid) => {\n    'use strict';\n    contextid = id;\n    modname = name;\n    instance = instanceid;\n\n    document.querySelector('#format_popups_activity_content').removeEventListener('click', showReport);\n    document.querySelector('#format_popups_activity_content').addEventListener('click', showReport);\n};\n\n/**\n * Show report page\n *\n * @param string response text\n */\nconst showReport = (e) => {\n    let anchor = e.target.closest('a');\n    if (anchor) {\n        let url = new URL(anchor.getAttribute('href')),\n            params = url.searchParams;\n\n        if (url.origin + url.pathname === config.wwwroot + '/mod/h5pactivity/report.php' && params.get('a') === instance) {\n            e.preventDefault();\n            e.stopPropagation();\n            Fragment.loadFragment(\n                'format_popups',\n                'mod',\n                contextid,\n                {\n                    jsondata: JSON.stringify(params.toString()),\n                    modname: modname\n                }\n            ).then(function(html, js) {\n                templates.replaceNodeContents('#format_popups_activity_content', html, js);\n            }).fail(notification.exception);\n        }\n    }\n};\n"],"file":"h5pactivity.min.js"}