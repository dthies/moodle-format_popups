define ("format_popups/folder",["exports","core/config","core/notification","core/templates"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=e(b);c=e(c);d=e(d);function e(a){return a&&a.__esModule?a:{default:a}}var f,g;a.init=function init(a,b){g=a;f=b;document.querySelector("#format_popups_activity_content").removeEventListener("click",h);document.querySelector("#format_popups_activity_content").addEventListener("click",h)};var h=function(a){var e=a.target.closest("div.foldertree a");if(e){var h=new URL(e.getAttribute("href")),i=new URL(b.default.wwwroot+"/mod/folder/view.php"),j=h.pathname.split("/").slice(-5);if(!h.searchParams.get("forcedownload")&&j[0]==g){var k=-1!==j[4].search(".")&&["gif","jpg","jpeg","png","svg"].includes(j[4].split(".").pop());a.preventDefault();a.stopPropagation();i.searchParams.append("id",f);d.default.render("format_popups/embedfile",{heading:decodeURI(j[4]),image:k,returnurl:i.toString(),url:h.toString(),params:[{name:"forcedownload",value:1}]}).then(d.default.replaceNodeContents.bind(d.default,"#format_popups_activity_content")).fail(c.default.exception)}}}});
//# sourceMappingURL=folder.min.js.map
